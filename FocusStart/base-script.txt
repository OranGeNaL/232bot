PRAGMA FOREIGN_KEYS=ON;

CREATE TABLE Shops(ID INTEGER(20) PRIMARY KEY NOT NULL,
Shop_Name VARCHAR(200) NOT NULL,
Region VARCHAR(200) NOT NULL,
City VARCHAR(200) NOT NULL,
Adress VARCHAR(200) NOT NULL,
Manager_ID INTEGER(20) REFERENCES Employees NOT NULL
);

CREATE TABLE Employees(ID INTEGER(20) PRIMARY KEY NOT NULL,
First_Name VARCHAR(100) NOT NULL,
Last_Name VARCHAR(100) NOT NULL,
PHONE VARCHAR(50) NOT NULL,
E_Mail VARCHAR(50) NOT NULL,
Job_Name VARCHAR(50) NOT NULL,
Shop_ID INTEGER(20) REFERENCES Shops
);

CREATE TABLE Purchases(ID INTEGER(20) PRIMARY KEY NOT NULL,
DateTime DATE NOT NULL,
Amount INTEGER(20) NOT NULL,
Seller_ID INTEGER(20) REFERENCES Employees
);

CREATE TABLE Purchase_Receipts(Ordinal_Number INTEGER(5) NOT NULL,
Product_ID INTEGER(20) REFERENCES Products NOT NULL,
Purchase_ID INTEGER(20) REFERENCES Purchases NOT NULL,
Quantity INTEGER(25,5) NOT NULL,
Amount_Full INTEGER(20) NOT NULL,
Amount_Discount INTEGER(20) NOT NULL,
PRIMARY KEY (Ordinal_Number, Purchase_ID)
);

CREATE TABLE Products(ID INTEGER(20) PRIMARY KEY NOT NULL,
Code VARCHAR(50) UNIQUE NOT NULL,
Product_Name VARCHAR(200) NOT NULL
);