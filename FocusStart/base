CREATE TABLE Shops(
    ID NUMERIC(20) PRIMARY KEY NOT NULL,
    Shop_Name VARCHAR(200) NOT NULL,
    Region VARCHAR(200) NOT NULL,
    City VARCHAR(200) NOT NULL,
    Adress VARCHAR(200) NOT NULL,
    Manager_ID NUMERIC(20)
);

CREATE TABLE Employees(
    ID NUMERIC(20) PRIMARY KEY NOT NULL,
    First_Name VARCHAR(100) NOT NULL,
    Last_Name VARCHAR(100) NOT NULL,
    PHONE VARCHAR(50) NOT NULL,
    E_Mail VARCHAR(50) NOT NULL,
    Job_Name VARCHAR(50) NOT NULL,
    Shop_ID NUMERIC(20)
);

CREATE TABLE Products(
    ID NUMERIC(20) PRIMARY KEY NOT NULL,
    Code VARCHAR(50) UNIQUE NOT NULL,
    Product_Name VARCHAR(200) NOT NULL
);

CREATE TABLE Purchases(
    ID NUMERIC(20) PRIMARY KEY NOT NULL,
    Date_Time DATE NOT NULL,
    Amount NUMERIC(20) NOT NULL,
    Seller_ID NUMERIC(20) REFERENCES Employees(ID) ON DELETE CASCADE
);

CREATE TABLE Purchase_Receipts(
    Ordinal_Number NUMERIC(5) NOT NULL,
    Product_ID NUMERIC(20) REFERENCES Products(ID) ON DELETE CASCADE NOT NULL,
    Purchase_ID NUMERIC(20) REFERENCES Purchases(ID) ON DELETE CASCADE  NOT NULL,
    Quantity NUMERIC(25,5) NOT NULL,
    Amount_Full NUMERIC(20) NOT NULL,
    Amount_Discount NUMERIC(20) NOT NULL,
    PRIMARY KEY (Ordinal_Number, Purchase_ID)
);

ALTER TABLE Employees ADD FOREIGN KEY (Shop_ID) REFERENCES Shops (ID);
ALTER TABLE Shops ADD FOREIGN KEY (Manager_ID) REFERENCES Employees (ID);